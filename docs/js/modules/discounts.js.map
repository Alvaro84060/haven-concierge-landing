{"version":3,"file":"discounts.js","names":["_discountsData","require","_utils","_createDiscountGlass","_toConsumableArray","arr","_arrayWithoutHoles","_iterableToArray","_unsupportedIterableToArray","_nonIterableSpread","TypeError","o","minLen","_arrayLikeToArray","n","Object","prototype","toString","call","slice","constructor","name","Array","from","test","iter","Symbol","iterator","isArray","len","length","i","arr2","externalSliderContainer","document","querySelector","externalSwiperWrapper","createExternalSwiperWrap","appendChild","initialExternalSlide","getInitialExternalSlide","externalSwiper","initializeExternalSwiper","innerSliderContainers","querySelectorAll","forEach","initializeInnerSwiper","addEventListener","handleCopyPromo","slideList","item","setAttribute","initialSlide","Swiper","spaceBetween","effect","slidesPerView","speed","keyboard","enabled","onlyInViewport","mousewheel","invert","pagination","el","clickable","renderBullet","renderExternalBullet","container","slides","children","array","map","getAttribute","innerSwiper","direction","nested","index","className","namePag","currentSeason","getSeason","indexOf","createExternalSlide","season","slide","createElement","concat","swiperContainer","createInnerSliderContainer","swiperWrapper","seasons","keys","seasonDiscountInfo","seasonSlide","classSpan","svg","createExternalPagIcon","outerHTML","width","height","use","createInnerSwiperSlide","imageIndex","_seasonDiscountInfo$s","image","dataName","description","terms","promo","imageUrl","getImageUrl","getImageName","createInnerSlideBlock","createGlass","canUseWebP","style","backgroundImage","cssText","innerWrapper","_","currentDate","Date","currentMonth","getMonth","seasonStartMonths","seasonNames","e","clickedEl","target","isCopyIcon","classList","contains","textEl","previousElementSibling","text","textContent","copyToClipboard","add","setTimeout","remove"],"sources":["modules/discounts.js"],"sourcesContent":["import { seasonDiscountInfo } from \"./discounts-data\";\nimport { canUseWebP, getImageName,  copyToClipboard, getImageUrl} from \"./utils\";\nimport { createGlass } from \"./create-discount-glass\";\n\nconst externalSliderContainer = document.querySelector('.swiper-container-parent'); \nconst externalSwiperWrapper = createExternalSwiperWrap();\nexternalSliderContainer.appendChild(externalSwiperWrapper);\nconst initialExternalSlide = getInitialExternalSlide();\nconst externalSwiper = initializeExternalSwiper(initialExternalSlide);\n\nconst innerSliderContainers = document.querySelectorAll('.swiper-container-nested');\ninnerSliderContainers.forEach(initializeInnerSwiper);\nexternalSliderContainer.addEventListener('click', handleCopyPromo);\nconst slideList = document.querySelectorAll('.swiper-slide');\n  [...slideList].forEach(item => item.setAttribute('role', 'Слайд'));\n\nfunction initializeExternalSwiper(initialSlide) {\n  return new Swiper('.swiper-container-parent', {\n    spaceBetween: 20,\n    initialSlide: initialSlide,\n    effect: 'fade',\n    slidesPerView: 1,\n    speed: 1500,\n    \n    \n    keyboard: {\n      enabled: true,\n      onlyInViewport: true,\n    },\n    mousewheel: {\n      invert: true,\n    },\n    pagination: {\n      el: \".swiper-pagination-parent\",\n      clickable: true,\n      renderBullet: renderExternalBullet,\n    }\n  });\n}\n\nfunction initializeInnerSwiper(container) {\n  const slides = container.children[0].children;\n  const array = Array.from(slides).map((i) => i.getAttribute('data-name'));\n  const innerSwiper = new Swiper(container, {\n    direction: \"vertical\",\n    effect: 'slider',\n    slidesPerView: 1,\n    speed: 1000,\n    keyboard: {\n      enabled: true,\n      onlyInViewport: true,\n    },\n    mousewheel: {\n      invert: true,\n    },\n    nested: true,\n    pagination: {\n      el: \".swiper-pagination-nested\",\n      clickable: true,\n      renderBullet: (index, className) => {\n        const namePag = array[index];\n        return '<span class=\"' + className + '\">' + namePag + '</span>';\n      },\n    }\n  });\n}\n\nfunction getInitialExternalSlide() {\n  const currentSeason = getSeason();\n  return ['spring', 'summer', 'autumn', 'winter'].indexOf(currentSeason) + 1 || 0;\n}\n\nfunction createExternalSlide(season) {\n  const slide = document.createElement('li');\n  slide.className = `swiper-slide swiper-slide--${season}`;\n\n  const swiperContainer = createInnerSliderContainer(season);\n  slide.appendChild(swiperContainer);\n\n  return slide;\n}\n\nfunction createExternalSwiperWrap() {\n  const swiperWrapper = document.createElement('ul');\n  swiperWrapper.className = 'swiper-wrapper discounts__swiper-wrapper';\n\n  const seasons = Object.keys(seasonDiscountInfo);\n\n  seasons.forEach((season) => {\n    const seasonSlide = createExternalSlide(season);\n    swiperWrapper.appendChild(seasonSlide);\n  });\n\n  return swiperWrapper;\n}\n\nfunction renderExternalBullet(index, className) {\n  const seasons = Object.keys(seasonDiscountInfo);\n  const season = seasons[index];\n  const classSpan = `discount__pagination-btn btn--${season}`;\n  const svg = createExternalPagIcon(season);\n  return '<span class=\"' + className + \" \" + classSpan + '\">' + svg.outerHTML + '</span>';\n}\n\nfunction createExternalPagIcon(season) {\n  const svg = document.createElement('svg');\n  svg.className = 'discount__pagination-icon';\n  svg.width = 40;\n  svg.height = 40;\n\n  const use = document.createElement('use');\n  use.setAttribute('href', `images/sprite.svg#icon-${season}`);\n\n  svg.appendChild(use);\n  return svg;\n}\n\nfunction createInnerSwiperSlide(season, imageIndex) {\n  const { image, dataName, description, terms, promo } = seasonDiscountInfo[season][imageIndex];\n  const imageUrl = getImageUrl('discounts', getImageName(image));\n  const slide = createInnerSlideBlock(season, dataName, imageUrl);\n  slide.appendChild(createGlass(description, terms, promo));\n  return slide;\n}\n\nfunction createInnerSlideBlock(season, dataName, imageUrl) {\n  const slide = document.createElement('div');\n  slide.className = `swiper-slide discounts__slide discounts__slide--${season}`;\n  slide.setAttribute('data-name', dataName);\n\n  if (canUseWebP()) {\n    slide.style.backgroundImage = imageUrl;\n  } else {\n    slide.style.cssText = `background-image: ${imageUrl}`;\n  }\n\n  return slide;\n}\n\nfunction createInnerSliderContainer(season) {\n  const container = document.createElement('div');\n  container.className = 'swiper-container-nested';\n  \n  const innerWrapper = document.createElement('div');\n  innerWrapper.className = 'swiper-wrapper discounts__inner-swiper-wrapper';\n  seasonDiscountInfo[season].forEach((_, i) => {\n    innerWrapper.appendChild(createInnerSwiperSlide(season, i));\n  });\n  container.appendChild(innerWrapper);\n  const pagination = document.createElement('div');\n  pagination.className = 'swiper-pagination swiper-pagination-nested';\n  container.appendChild(pagination);\n  return container;\n}\n\nfunction getSeason() {\n  const currentDate = new Date();\n  const currentMonth = currentDate.getMonth();\n  const seasonStartMonths = [2, 5, 8, 11];\n  const seasonNames = ['spring', 'summer', 'autumn', 'winter'];\n\n  for (let i = 0; i < seasonStartMonths.length; i++) {\n    if (currentMonth >= seasonStartMonths[i] && currentMonth < seasonStartMonths[i + 1]) {\n      return seasonNames[i];\n    }\n  }\n\n}\n\n\n\nfunction handleCopyPromo(e) {\nconst clickedEl = e.target;\nconst isCopyIcon = clickedEl.classList.contains('promo__copy-icon');\nif(isCopyIcon) {\n  const textEl  = clickedEl.previousElementSibling;\n  const text = textEl.textContent;\n  copyToClipboard(text);\n  textEl.classList.add('isCopied');\n  setTimeout(() => {\n    textEl.classList.remove('isCopied');\n  }, 1000);\n} \n\n}"],"mappings":"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"}