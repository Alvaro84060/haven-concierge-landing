{"version":3,"file":"success-order-table.js","names":["_common","require","_localStorage","_slicedToArray","arr","i","_arrayWithHoles","_iterableToArrayLimit","_unsupportedIterableToArray","_nonIterableRest","TypeError","o","minLen","_arrayLikeToArray","n","Object","prototype","toString","call","slice","constructor","name","Array","from","test","len","length","arr2","r","l","t","Symbol","iterator","e","u","a","f","next","done","push","value","isArray","userOrderDataObj","getDataFromStorage","tableServices","document","querySelector","tableInfo","sectionSuccess","tableServicesBody","backToHomeBtn","addEventListener","resetLocalStorage","populateUserOrderTable","entries","forEach","_ref","_ref2","key","element","concat","textContent","toggleRowDisplay","parentElement","setTotalOrderCostInTable","isComplexOrder","cell","calculateTotalCost","row","style","display","createTableRow","quantity","cost","newRow","createElement","innerHTML","obj","userSquare","userServices","parseCost","parseFloat","replace","squareCost","totalServicesCost","reduce","acc","service","populateUserServicesTable","trim","appendElement","populateServiceRows","hideTable","setSectionSuccessStyle","_ref3","serviceRow","table","classList","add","remove","showUserOrderResultData"],"sources":["modules/success-order-table.js"],"sourcesContent":["import { appendElement } from './common';\nimport { getDataFromStorage, resetLocalStorage } from './local-storage';\nconst userOrderDataObj = getDataFromStorage('userOrderDataObj');\nconst tableServices = document.querySelector('.success-order-services-table');\nconst tableInfo = document.querySelector('.success-order-info-table');\nconst sectionSuccess = document.querySelector('.section--success');\nconst tableServicesBody = document.querySelector(\n  '.success-order-services-table tbody'\n);\nconst backToHomeBtn = document.querySelector('.back-to-home-btn');\nbackToHomeBtn.addEventListener('click', () =>\n  resetLocalStorage('userOrderDataObj')\n);\n\nfunction populateUserOrderTable() {\n  Object.entries(userOrderDataObj).forEach(([key, value]) => {\n    const element = document.querySelector(\n      `.success-order__value[data-field='${key}']`\n    );\n\n    if (element) {\n      element.textContent = value;\n      toggleRowDisplay(element.parentElement, value);\n    }\n  });\n}\n\nfunction setTotalOrderCostInTable(isComplexOrder) {\n  const cell = document.querySelector(\n    '.success-order--total[data-field=\"total\"]'\n  );\n  if (isComplexOrder) {\n    cell.textContent = calculateTotalCost(userOrderDataObj);\n  } else {\n    cell.textContent = '399zł';\n  }\n}\nfunction toggleRowDisplay(row, value) {\n  if (row) {\n    row.style.display = value ? '' : 'none';\n  }\n}\n\nfunction createTableRow(name, quantity, cost) {\n  const newRow = document.createElement('tr');\n  newRow.innerHTML = `\n    <th class=\"success-order__name\">${name}</th>\n    <td class=\"success-order__value success-order__quantity\">${quantity}</td>\n    <td class=\"success-order__value success-order__cost\">${cost}</td>\n  `;\n  return newRow;\n}\n\nfunction calculateTotalCost(obj) {\n  const { userSquare, userServices } = obj;\n  const parseCost = cost =>\n    parseFloat(cost.replace('zł', '').replace(',', '.'));\n\n  const squareCost = parseCost(userSquare.cost);\n  const totalServicesCost = userServices.reduce(\n    (acc, service) => acc + parseCost(service.cost),\n    0\n  );\n\n  return `${squareCost + totalServicesCost}zł`;\n}\n\nfunction populateUserServicesTable() {\n  const { userSquare, userServices } = userOrderDataObj;\n  const isComplexOrder =\n    userSquare.quantity.trim() !== '' || userSquare.cost.trim() !== '';\n\n  if (isComplexOrder) {\n    const newRow = createTableRow(\n      'Площа, м²',\n      userSquare.quantity,\n      userSquare.cost\n    );\n    appendElement(tableServicesBody, newRow);\n    populateServiceRows(userServices);\n  } else {\n    hideTable(tableServices);\n  }\n  setSectionSuccessStyle(isComplexOrder);\n  setTotalOrderCostInTable(isComplexOrder);\n}\n\nfunction populateServiceRows(userServices) {\n  userServices.forEach(({ name, quantity, cost }) => {\n    const serviceRow = createTableRow(name, quantity, cost);\n    appendElement(tableServicesBody, serviceRow);\n  });\n}\n\nfunction hideTable(table) {\n  table.style.display = 'none';\n}\n\nfunction setSectionSuccessStyle(isComplexOrder) {\n  if (isComplexOrder) {\n    sectionSuccess.classList.add('isComplexOrder');\n  } else {\n    sectionSuccess.classList.remove('isComplexOrder');\n  }\n}\n\nfunction showUserOrderResultData() {\n  if (userOrderDataObj) {\n    populateUserOrderTable();\n    populateUserServicesTable();\n  } else {\n    hideTable(tableInfo);\n    hideTable(tableServices);\n  }\n}\n\nshowUserOrderResultData();\n"],"mappings":"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"}